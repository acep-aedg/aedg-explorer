- if google_analytics_id.present?
  / === Google Analytics (GA4) ===
  %script{ async: true, src: "https://www.googletagmanager.com/gtag/js?id=#{google_analytics_id}" }
  %script
    :plain
      // Boot Google Analytics
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', #{google_analytics_id});

      // Track page views with Turbolinks navigation
      document.addEventListener('turbolinks:load', function(event) {
        if (typeof gtag === 'function') {
          gtag('event', 'page_view', {
            page_path: event.data.url,
            page_title: document.title
          });
        }
      });
