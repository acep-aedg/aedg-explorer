/ --- SEARCH BAR ---
%div.text-center.mb-5
  %p.lead.text-muted
    Find data dashboards, tools, and new datasets.

  / Center and contain search bar + button tightly
  %div.d-flex.justify-content-center.mb-3
    = form_with url: root_path, method: :get, local: true, data: { turbo: false }, html: { id: 'home-search-form' }, class: "d-inline-block w-50" do
      %div.input-group.rounded-pill.shadow-sm.border.mx-auto
        %span.input-group-text.bg-white.border-0
          %i.bi.bi-search.text-muted
        = text_field_tag :q, params[:q],
          class: "form-control border-0 rounded-end-pill py-2",
          placeholder: "Search for a community...",
          form: 'home-search-form'
        %button.btn.btn-white.border-0{ type: "submit", form: "home-search-form" }
          %i.bi.bi-arrow-return-left.text-secondary

  / Pull Advanced Search link closer to bar
  %div.mt-2
    = link_to 'Advanced Search', search_advanced_path, class: 'text-decoration-none small text-muted'
    %span.mx-1 •
    = link_to 'About page', about_path, class: 'text-decoration-none small text-muted'
    %span.mx-1 •
    = link_to 'User Guide', user_guide_path, class: 'text-decoration-none small text-muted'


  / --- RESULTS SECTION ---
  - if @query.present?
    - if @communities.present?
      .mt-5.text-center
        %h5.text-muted.mb-3
          Results for
          %strong= @query

        / horizontally scrolling list, centered under hero
        .d-flex.flex-wrap.justify-content-center.gap-3.mx-auto{ style: "max-width: 900px;" }
          - @communities.each do |community|
            %div
              = link_to community.name, community_path(community),
                class: "text-decoration-none text-primary fw-semibold"

    - else
      %p.text-center.text-muted.mt-4
        No results found for "#{@query}".
