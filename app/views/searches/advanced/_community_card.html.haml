- community = local_assigns.fetch(:community)

.bg-white.rounded-3.p-3.shadow-sm
  .d-flex.justify-content-between.flex-wrap
    %h5.mb-1
      = link_to community.name, community_path(community), class: "text-decoration-none"

    / === TAGS AREA ===
    .d-flex.flex-wrap.gap-1
      - if community.respond_to?(:grids)
        - community.grids.active.each do |g|
          = link_to grid_path(g), class: "badge bg-light text-body border text-decoration-none" do
            %i.bi.bi-grid-3x3-gap.me-1
            = g.name

      - if (b = community.borough).present?
        %span.badge.bg-secondary.text-light
          = b.name

      - if (rc = community.regional_corporation).present?
        %span.badge.bg-success.text-light
          = rc.name

      - if community.respond_to?(:senate_districts)
        - community.senate_districts.each do |d|
          %span.badge.bg-info-subtle.text-dark.border
            %i.bi.bi-bank.me-1
            = "Senate District #{d.district || d}"

      - if community.respond_to?(:house_districts)
        - community.house_districts.each do |d|
          %span.badge.bg-primary-subtle.text-primary.border
            %i.bi.bi-house.me-1
            - label = d.respond_to?(:name) && d.name.present? ? d.name : "House District #{d.district || d}"
            = label

  .mt-2
    = link_to 'View Community', community_path(community),
      class: 'btn btn-outline-success btn-sm px-3 fw-semibold shadow-sm'

  - if community.respond_to?(:datasets) && community.datasets.any?
    %h6.mt-3.mb-2 Datasets for this community
    %ul.list-group.list-group-flush
      - community.datasets.limit(3).each do |dataset|
        %li.list-group-item
          = link_to dataset.title, "#"
          %span.text-muted.small.ms-2= dataset.try(:organization)
  - else
    -# no datasets shown
